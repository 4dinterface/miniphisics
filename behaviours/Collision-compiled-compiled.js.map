{"version":3,"sources":["Collision-compiled.js"],"names":[],"mappings":"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","file":"Collision-compiled-compiled.js","sourcesContent":["\"use strict\";\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Collision = (function () {\n  function Collision(config) {\n    _classCallCheck(this, Collision);\n\n    this.isBehaviour = true;\n  }\n\n  //exports.Collision = Collision;\n\n  _createClass(Collision, [{\n    key: \"tick\",\n    value: function tick(scene, time, interval) {\n      var items = scene.items;\n\n      //������� ���������� �� ������ ��������\n      for (var i1 = 0; i1 < items.length; i1++) {\n        var item1 = items[i1];\n\n        //for(var i2=0;i2<this.items.length;i2++) {\n\n        for (var i2 = i1 + 1; i2 < items.length; i2++) {\n          //�����������, � ���������� �� i �� ��� ����������, i1 ��� ��� ������� ������� ����������\n          var item2 = items[i2],\n              collision = undefined;\n\n          if (item1.type == \"BodyBox\" && item2.type == \"BodyCircle\") collision = this.collisionBoxAndCircle(item1, item2);\n          if (item1.type == \"BodyCircle\" && item2.type == \"BodyBox\") collision = this.collisionBoxAndCircle(item2, item1);\n          if (item1.type == \"BodyCircle\" && item2.type == \"BodyCircle\") collision = this.collisionCircleAndCircle(item1, item2);\n\n          if (collision) {\n            //������� ����������� ���� �� ������������ � �������, ���� ��������� �� ��� ��� ������ ������ �����������\n            //if(item1.pos.y<item2.pos.y  === item1.v.y>0 && item1.pos.x<item2.pos.x==item1.v.x>0) {\n\n            var napY = item2.pos.y - item1.pos.y; //���� item1 ������ �� >0, ���� item2 ������ ����� <0\n            var napX = item2.pos.x - item1.pos.x;\n\n            if (napX < 0 && item1.v.x < 0) item1.v.x = item1.v.x * -item1.elast;\n            if (napX > 0 && item1.v.x > 0) item1.v.x = item1.v.x * -item1.elast;\n            if (napY < 0 && item1.v.y < 0) item1.v.y = item1.v.y * -item1.elast;\n            if (napY > 0 && item1.v.y > 0) item1.v.y = item1.v.y * -item1.elast;\n\n            if (napX > 0 && item2.v.x < 0) item2.v.x = item2.v.x * -item2.elast;\n            if (napX < 0 && item2.v.x > 0) item2.v.x = item2.v.x * -item2.elast;\n            if (napY > 0 && item2.v.y < 0) item2.v.y = item2.v.y * -item2.elast;\n            if (napY < 0 && item2.v.y > 0) item2.v.y = item2.v.y * -item2.elast;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"collisionCircleAndCircle\",\n    value: function collisionCircleAndCircle(circle1, circle2) {\n      var r = Math.sqrt(Math.pow(circle1.pos.x - circle2.pos.x, 2) + Math.pow(circle1.pos.y - circle2.pos.y, 2));\n      if (r < circle1.d / 2 + circle2.d / 2) return true;\n      return false;\n    }\n\n    //��� ����� ��������� � ��������, �������� �� �� ���� ��� ������� �����\n  }, {\n    key: \"collisionBoxAndCircle\",\n    value: function collisionBoxAndCircle(rect, circle) {\n      var rectCenter = new Vector(rect.width / 2, rect.height / 2),\n          center = new Vector(circle.pos.x - rect.pos.x, circle.pos.y - rect.pos.y),\n          side = new Vector(Math.abs(center.x) - rectCenter.x, Math.abs(center.y) - rectCenter.y);\n\n      if (side.x <= circle.d / 2 && side.y <= circle.d / 2) return {\n        x: circle.d / 2 - (center.x - rectCenter.x),\n        y: circle.d / 2 - side.y\n      };\n      return false;\n    }\n  }]);\n\n  return Collision;\n})();\n\n//# sourceMappingURL=Collision-compiled.js.map"]}