{"version":3,"sources":["Scene.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;;;IAEP,OAAO;YAAP,OAAO;;AAEA,WAFP,OAAO,CAEC,MAAM,EAAC;0BAFf,OAAO;;AAGT,+BAHE,OAAO,6CAGD;AACR,QAAI,CAAC,KAAK,GAAC,EAAE,CAAC;AACd,QAAI,CAAC,UAAU,GAAC,EAAE,CAAC;AACnB,QAAI,CAAC,IAAI,GAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;GAChC;;eAPG,OAAO;;WASP,cAAC,IAAI,EAAC;AACR,UAAI,QAAQ,GAAC,AAAC,IAAI,GAAC,IAAI,CAAC,QAAQ,IAAG,CAAC,CAAC;;;AAGrC,WAAI,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,IAAI,CAAC,UAAU,CAAC,MAAM,EAAC,CAAC,EAAE,EAAC;AACvC,YAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;OAC/C;;;AAGD,WAAI,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAC,CAAC,EAAE,EAAC;AAClC,YAAI,IAAI,GAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AACvB,YAAG,IAAI,UAAO,EAAE,SAAS;AACzB,YAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,GAAC,IAAI,CAAC,CAAC,CAAC;OACpD;;AAED,UAAI,CAAC,IAAI,CAAC,MAAM,EAAC;AACf,YAAI,EAAC,IAAI;OACV,CAAC,CAAC;;AAEH,UAAI,CAAC,SAAS,GAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;AAC/C,UAAI,CAAC,QAAQ,GAAC,IAAI,CAAC;KACpB;;;WAEG,gBAAE;AACJ,UAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;KACb;;;WAEG,gBAAE;AACJ,0BAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KACtC;;;WAEE,aAAC,GAAG,EAAC;AACN,UAAG,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA,KACxC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;;AAE1B,SAAG,CAAC,SAAS,GAAC,IAAI,CAAC,GAAG,EAAE,CAAC;KAC1B;;;WAEK,gBAAC,GAAG,EAAC;AACT,UAAI,CAAC,GAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AAC9B,UAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;KACxB;;;SAlDG,OAAO;GAAS,YAAY","file":"Scene-compiled.js","sourcesContent":["\"use strict\";\r\n\r\nclass Phisics extends EventEmitter{\r\n\r\n  constructor(config){\r\n    super();\r\n    this.items=[];\r\n    this.behaviours=[];\r\n    this.tick=this.tick.bind(this);\r\n  }\r\n\r\n  tick(time){\r\n    var interval=(time-this.lastTime)||0;\r\n\r\n    //���������� ���������\r\n    for(let i=0;i<this.behaviours.length;i++){\r\n      this.behaviours[i].tick(this, time, interval);\r\n    }\r\n\r\n    //������� ������� �������� �� �������\r\n    for(let i=0;i<this.items.length;i++){\r\n      let item=this.items[i];\r\n      if(item.static) continue;\r\n      item.pos = item.pos.add(item.v.mul(interval/1000));//��� �� ����� ��� � pos.y=pos.y+v.y/1000*interval\r\n    }\r\n\r\n    this.fire(\"tick\",{\r\n      time:time\r\n    });\r\n\r\n    this.animFrame=requestAnimationFrame(this.tick)\r\n    this.lastTime=time;\r\n  }\r\n\r\n  play(){\r\n    this.tick(0)\r\n  }\r\n\r\n  stop(){\r\n    cancelAnimationFrame(this.animFrame);\r\n  }\r\n\r\n  add(obj){\r\n    if(obj.isBehaviour) this.behaviours.push(obj)\r\n    else this.items.push(obj);\r\n\r\n    obj.startTime=Date.now();\r\n  }\r\n\r\n  remove(obj){\r\n    var i=this.items.indexOf(obj);\r\n    this.items.splice(i,1);\r\n  }\r\n}"]}